<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_162) on Fri Oct 11 15:36:32 PDT 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DefaultMemoryRequestServer (datasketches-memory 1.2.0-incubating-SNAPSHOT API)</title>
<meta name="date" content="2019-10-11">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DefaultMemoryRequestServer (datasketches-memory 1.2.0-incubating-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="../../../../org/apache/datasketches/memory/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultMemoryRequestServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/datasketches/memory/Buffer.html" title="class in org.apache.datasketches.memory"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/datasketches/memory/Handle.html" title="interface in org.apache.datasketches.memory"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/datasketches/memory/DefaultMemoryRequestServer.html" target="_top">Frames</a></li>
<li><a href="DefaultMemoryRequestServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.datasketches.memory</div>
<h2 title="Class DefaultMemoryRequestServer" class="title">Class DefaultMemoryRequestServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.datasketches.memory.DefaultMemoryRequestServer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../org/apache/datasketches/memory/MemoryRequestServer.html" title="interface in org.apache.datasketches.memory">MemoryRequestServer</a></dd>
</dl>
<hr>
<br>
<pre>public final class <span class="typeNameLabel">DefaultMemoryRequestServer</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../org/apache/datasketches/memory/MemoryRequestServer.html" title="interface in org.apache.datasketches.memory">MemoryRequestServer</a></pre>
<div class="block">This is a simple implementation of the MemoryRequestServer that creates space on the Java heap
 for the requesting application. This capability is only available for direct, off-heap
 allocated memory.

 <p>Using this default implementation could be something like the following:

 <blockquote><pre>
 class OffHeap {
   WritableMemory mem;
   MemoryRequestServer memReqSvr = null;

   void add(Object something) {

     if (outOfSpace) { // determine if out-of-space
       long spaceNeeded = ...

       //Acquire the MemoryRequestServer from the direct Memory the first time.
       //Once acquired, this can be reused if more memory is needed later.
       //This is required for the default implementation because it returns memory on heap
       // and on-heap memory does not carry a reference to the MemoryRequestServer.
       memReqSvr = (memReqSvr == null) ? mem.getMemoryRequestServer() : memReqSvr;

       //Request bigger memory
       WritableMemory newMem = memReqSvr.request(spaceNeeded);

       //Copy your data from the current memory to the new one and resize
       moveAndResize(mem, newMem);

       //You are done with the old memory, so request close.
       //Note that it is up to the owner of the WritableDirectHandle whether or not to
       // actually close the resource.
       memReqSvr.requestClose(mem, newMem);

       mem = newMem; //update your reference to memoty
     }

     //continue with the add process
   }
 }
 </pre></blockquote></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Lee Rhodes</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/datasketches/memory/DefaultMemoryRequestServer.html#DefaultMemoryRequestServer--">DefaultMemoryRequestServer</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/datasketches/memory/WritableMemory.html" title="class in org.apache.datasketches.memory">WritableMemory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/datasketches/memory/DefaultMemoryRequestServer.html#request-long-">request</a></span>(long&nbsp;capacityBytes)</code>
<div class="block">Request new WritableMemory with the given capacity.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/datasketches/memory/DefaultMemoryRequestServer.html#requestClose-org.apache.datasketches.memory.WritableMemory-org.apache.datasketches.memory.WritableMemory-">requestClose</a></span>(<a href="../../../../org/apache/datasketches/memory/WritableMemory.html" title="class in org.apache.datasketches.memory">WritableMemory</a>&nbsp;memToRelease,
            <a href="../../../../org/apache/datasketches/memory/WritableMemory.html" title="class in org.apache.datasketches.memory">WritableMemory</a>&nbsp;newMemory)</code>
<div class="block">Request close the AutoCloseable resource.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DefaultMemoryRequestServer--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DefaultMemoryRequestServer</h4>
<pre>public&nbsp;DefaultMemoryRequestServer()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="request-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>request</h4>
<pre>public&nbsp;<a href="../../../../org/apache/datasketches/memory/WritableMemory.html" title="class in org.apache.datasketches.memory">WritableMemory</a>&nbsp;request(long&nbsp;capacityBytes)</pre>
<div class="block">Request new WritableMemory with the given capacity.

 <p>By default this allocates new memory requests on the Java heap.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/datasketches/memory/MemoryRequestServer.html#request-long-">request</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/datasketches/memory/MemoryRequestServer.html" title="interface in org.apache.datasketches.memory">MemoryRequestServer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>capacityBytes</code> - The capacity being requested.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>new WritableMemory with the given capacity.</dd>
</dl>
</li>
</ul>
<a name="requestClose-org.apache.datasketches.memory.WritableMemory-org.apache.datasketches.memory.WritableMemory-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>requestClose</h4>
<pre>public&nbsp;void&nbsp;requestClose(<a href="../../../../org/apache/datasketches/memory/WritableMemory.html" title="class in org.apache.datasketches.memory">WritableMemory</a>&nbsp;memToRelease,
                         <a href="../../../../org/apache/datasketches/memory/WritableMemory.html" title="class in org.apache.datasketches.memory">WritableMemory</a>&nbsp;newMemory)</pre>
<div class="block">Request close the AutoCloseable resource.
 This may be ignored depending on the application implementation.

 <p>This method does nothing in this default implementation because it is application specific.
 This method must be overridden to explicitly close if desired.
 Otherwise, the AutoCloseable will eventually close the resource.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/datasketches/memory/MemoryRequestServer.html#requestClose-org.apache.datasketches.memory.WritableMemory-org.apache.datasketches.memory.WritableMemory-">requestClose</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../org/apache/datasketches/memory/MemoryRequestServer.html" title="interface in org.apache.datasketches.memory">MemoryRequestServer</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>memToRelease</code> - the relevant WritbleMemory to be considered for closing.</dd>
<dd><code>newMemory</code> - the newly allocated WritableMemory. This is returned from the client
 for the convenience of the resource owner. It is optional and may be null.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="../../../../org/apache/datasketches/memory/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultMemoryRequestServer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/datasketches/memory/Buffer.html" title="class in org.apache.datasketches.memory"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/datasketches/memory/Handle.html" title="interface in org.apache.datasketches.memory"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/datasketches/memory/DefaultMemoryRequestServer.html" target="_top">Frames</a></li>
<li><a href="DefaultMemoryRequestServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2015&#x2013;2019 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
